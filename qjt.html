<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>我的请假凭证</title>
    <link rel="shortcut icon" href="./static/favicon.ico" />
    <link href="./static/bootstrap.min.css" rel="stylesheet" />
    <link href="./static/font-awesome.min.css" rel="stylesheet" />
    <!-- bootstrap-table 表格插件样式 -->
    <link href="./static/bootstrap-table.min.css" rel="stylesheet" />
    <link href="./static/animate.css" rel="stylesheet" />
    <link href="./static/style.css" rel="stylesheet" />
    <link href="./static/ry-ui.css" rel="stylesheet" />

    <link href="./static/bootstrap-select.css" rel="stylesheet" />
  </head>
  <body class="gray-bg">
    <div class="wrapper wrapper-content animated fadeInRight">
      <form class="form-horizontal m" id="form-qjt-add">
        <input name="id" type="hidden" id="id" value="1092529" />
        <input
          id="11"
          value="Tue Oct 01 06:00:00 GMT+08:00 2022"
          type="hidden"
        />
        <input
          id="12"
          value="Tue Oct 01 22:00:00 GMT+08:00 2022"
          type="hidden"
        />
        <div class="row">
          <div class="col-sm-6">
            <div class="ibox float-e-margins">
              <div class="ibox-title">
                <h3 style="font-size:18px; bold;">广东二师请假审批通过凭证</h3>
              </div>
              <div class="ibox-content">
                <div class="row">
                  <div
                    class="col-sm-2 b-r"
                    style="width: 45%; float: left; font-size: 16px"
                  >
                    <p class="form-header" id="fill_name">蔡徐坤</p>
                    <p class="form-header" id="fill_faculty">生物与食品工程学院</p>
                    <p class="form-header" id="fill_class">20食品</p>
                    <p class="form-header" id="fill_id">20xxxxxxxxx</p>
                    <h3 style="font-size:30px; bold;" id="fill_inorout">离校</h3>
                  </div>
                  <div class="col-sm-4" style="width: 55%; float: left">
                    <p></p>
                    <h3 style="font-size:18px; bold;" id="fill_type">事假</h3>
                    <p></p>
                    <p id="fill_position">广州市内</p>
                    <p id="str"></p>
                    <p id="stp"></p>
                    <p><img class="img-lg" src="./static/qrcode.png" /></p>
                  </div>
                </div>
              </div>
              <div class="ibox-title">
                <h3 style="font-size: 20px" id="fill_current">
                  2022-10-01 00:00:00
                </h3>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <div style="padding: 5%;">
      <p><input type="text" id="input_name" placeholder="姓名" value="蔡徐坤"/></p>
      <p><input type="text" id="input_faculty" placeholder="学院" value="生物与食品工程学院"/></p>
      <p><input type="text" id="input_class" placeholder="班级" value="20食品"/></p>
      <p><input type="text" id="input_id" placeholder="学号" value="20xxxxxxxxx"/></p>

      <p><input type="text" id="input_inorout" placeholder="离校 进校" value="离校"/></p>
      <p><input type="text" id="input_type" placeholder="事假 病假" value="事假"/></p>
      <p><input type="text" id="input_position" placeholder="广州市内" value="广州市内"/></p>
      <button onclick="render()">生成</button>
      <button onclick="remove_localstorage()">清除本地存储</button>
      <br />
      <p>仅用于测试，使用后造成的任何后果均由使用者承担。</p>
    </div>
    


    <script src="./static/jquery.min.js.download"></script>

    <script>var ctx = "\/";</script>

    <script type="text/javascript">
      function df(date) {
        var date = new Date(date);
        var strDate = date.getFullYear() + "年";
        strDate += date.getMonth() + 1 + "月";
        strDate += date.getDate() + "日";
        strDate += date.getHours() + "时";
        return strDate;
      }

      function render() {
        console.log("enter render function");
        var _name = $("#input_name").val();
        var _faculty = $("#input_faculty").val();
        var _class = $("#input_class").val()
        var _id = $("#input_id").val()
        var _inorout = $("#input_inorout").val()
        var _type = $("#input_type").val()
        var _position = $("#input_position").val()

        $("#fill_name").html(_name);
        $("#fill_faculty").html(_faculty);
        $("#fill_class").html(_class);
        $("#fill_id").html(_id);

        $("#fill_inorout").html(_inorout);
        $("#fill_type").html(_type);
        $("#fill_position").html(_position);
        
        var m = new Date();
        strDate = m.getFullYear() + '-'
                + ('0' + (m.getMonth()+1)).slice(-2) + '-'
                + ('0' + m.getDate()).slice(-2) + ' ';
        
        strDatetime = strDate
                + ('0' + m.getHours()).slice(-2) + ':'
                + ('0' + m.getMinutes()).slice(-2) + ':'
                + ('0' + m.getSeconds()).slice(-2);

        $("#fill_current").html(strDatetime);
        console.log(strDatetime);

        var strtime = strDate + " 06:00:00"
        var stptime = strDate + " 22:00:00"

        $("#str").html(df(strtime) + "-");
        $("#stp").html(df(stptime));

        localStorage.setItem("_name", _name);
        localStorage.setItem("_faculty", _faculty);
        localStorage.setItem("_class", _class);
        localStorage.setItem("_id", _id);
        // localStorage.setItem("_inorout", _inorout);
        // localStorage.setItem("_type", _type);
        // localStorage.setItem("_position", _position);
      }

      function remove_localstorage() {
        localStorage.removeItem('_name');
        localStorage.removeItem('_faculty');
        localStorage.removeItem('_class');
        localStorage.removeItem('_id');
      }

      $(function () {
        var strtime = $("#11").val();
        var stptime = $("#12").val();

        $("#str").html(df(strtime) + "-");
        $("#stp").html(df(stptime));

        var _name = localStorage.getItem("_name");
        var _faculty = localStorage.getItem("_faculty");
        var _class = localStorage.getItem("_class");
        var _id = localStorage.getItem("_id");
        // var _inorout = localStorage.getItem("_inorout");
        // var _type = localStorage.getItem("_type");
        // var _position = localStorage.getItem("_position");
        
        if (_name == null) reutrn;
        $("#fill_name").html(_name);
        $("#fill_faculty").html(_faculty);
        $("#fill_class").html(_class);
        $("#fill_id").html(_id);

        document.getElementById("input_name").setAttribute("value", _name);
        document.getElementById("input_faculty").setAttribute("value", _faculty);
        document.getElementById("input_class").setAttribute("value", _class);
        document.getElementById("input_id").setAttribute("value", _id);
        // $("#input_name").html(_name);
        // $("#input_faculty").html(_faculty);
        // $("#input_class").html(_class);
        // $("#input_id").html(_id);
        // $("#fill_inorout").html(_inorout);
        // $("#fill_type").html(_type);
        // $("#fill_position").html(_position);
      });

    </script>
  </body>
</html>
